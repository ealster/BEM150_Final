BEM150 Final Project
========================================================
Eli Alster  
Vansh Kumar  
Angad Rekhi  

     We analyzed the NYC traffic data set. In order to simplify analysis, we only considered the 2013 data so the data set would be fixed.
  
```{r LoadData, echo=FALSE, cache=TRUE}
     library("plyr")
     library("hexbin")
     df = read.csv("collisions.csv", header = TRUE, sep="\t")
     df = subset(df, year == 2013)
     df$lat = as.numeric(as.character(df$lat))
```

```{r fig.width=7, fig.height=6, cache=TRUE}
     scooter_accidents = subset(df, scooter == TRUE)
     plot(scooter_accidents$lon, scooter_accidents$lat)
```
Plot of bicycle accidents.

```{r}
     df_in = subset(df, lat < 44)
     bin = hexbin(df_in$lon, df_in$lat, xbin=75)
     plot(bin)
```
Accident frequency map!

Histogram of reason for accident vs total people killed.

```{r}
     reasons = df[,39:68]

     mat = matrix(nrow=4, ncol=ncol(reasons))
     for ( r in 1:ncol(reasons) ) 
     {
          reason = names(reasons)[[r]]
          reason_row = subset(df, df[[reason]]==TRUE)
          ped = sum(reason_row[,"pedestr_killed"])
          pass = sum(reason_row[,"passengers_killed"])
          motor = sum(reason_row[,"motorists_killed"])
          cycle = sum(reason_row[,"cyclists_killed"])
          
          mat[,r] = c(ped, pass, motor, cycle)
     }

     par(mar=c(4,10,2,1)) # increase margins on plot 
     par(las=2)          # align accident names horizontally
     colors=c("blue","green","red","black")
     barplot(mat, horiz=TRUE, names.arg=colnames(reasons), col=colors, main="2013 NYC Deaths by Kind of Accident", xlab="Number of Deaths", xlim=c(0,40), cex.names=0.5)
     legend(x=25,y=25,fill=colors,legend=c("Pedestrians","Passengers","Motorists","Cyclists"))
 


